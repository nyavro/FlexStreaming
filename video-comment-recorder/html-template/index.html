<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
    <head>
        <title>Video comment</title>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
        <script type="text/javascript" src="swfobject.js"></script>
        <script type="text/javascript" src="mobile-utils.js"></script>
        <script type="text/javascript">
            var PROTOCOL = "http";
            var HOST = "${host}";
            var PORT = "8080";
            var APP = "videocomments";
            var URL = PROTOCOL + '://' + HOST + ':' + PORT + '/' + APP + '/api';
            var EMBED_CODE_TEMPLATE = URL + "/video?id=";
            var EMBED_WIDTH = 480;
            var EMBED_HEIGHT = 270;
            var id;
            if(!isMobile()) {
                var flashvars = {};
                flashvars.liveUrl = "rtmp://" + HOST + "/";
                flashvars.servletUrl = URL;
                flashvars.videoMaxDuration = 30;
                flashvars.embedWidth = EMBED_WIDTH;
                flashvars.embedHeight = EMBED_HEIGHT;
                flashvars.embedUrlTemplate = EMBED_CODE_TEMPLATE + "{0}";
                flashvars.question = "What our Clients think?";
                var params = {};
                params.menu = "false";
                params.quality = "best";
                params.scale = "noScale";
                params.align = "left";
                params.salign = "lt";
                params.bgcolor = "#ffffff";
                params.allowscriptaccess = "sameDomain";
                params.allowFullScreen = "true";
                var attributes = {};
                attributes.id = "swfPlaceholder";
                attributes.name = "swfPlaceholder";

                swfobject.embedSWF("${swf}", "swfPlaceholder", "100%", "100%", "9.0.124", "expressInstall.swf", flashvars, params, attributes);
            }
            $(function () {
                if(!isMobile()) {
                    $("#swfPlaceholder").show();
                    $("#uploadForm").hide();
                } else {
                    $("#swfPlaceholder").hide();
                    $("#uploadForm").show();
                    requestId();
                    $("#record")[0].addEventListener('change', handleFileSelect, false);
                }
            })
        </script>
    </head>

    <body style="margin: 0px;">
        <div id="swfPlaceholder" style="display:none">
            <h1>Sorry, you need to install flash player and enable javascript to see this content</h1>
            <p><a href="http://www.adobe.com/go/getflashplayer"><img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Get Adobe Flash player" /></a></p>
        </div>
        <div id="uploadForm">
            <input type="file" id="record" name="files[]" capture accept="video/*.mp4"/>
            <div id="embedCode">
                <code id="code"/>
            </div>
        </div>
    </body>
</html>
